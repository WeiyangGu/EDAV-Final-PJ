<!DOCTYPE html>
<!-- saved from url=(0033)http://localhost:8000/Hmk5Q5.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		<title>Hmk5 Q5</title>
		<script src="./Hmk5 Q5_files/d3.v4.min.js"></script>

	</head>
	<body>

	<div style="width: 600px">

	  <h2>Final Project</h2>
	  </div>

		<script type="text/javascript">

STATE=[]
MONTH=[]
SO2=[]



	var w = 1000;
  var h = 2000;
	var margin = {top: 25, right: 25, bottom: 25,
      left: 100};
  var innerWidth = w - margin.left - margin.right;
  var innerHeight = h - margin.top - margin.bottom;

  d3.select('body').append('svg').attr("height",h).attr("width",w);
	var svg=d3.select("svg");
	svg.append("rect").attr("fill","white").attr("height",h).attr("width",w);
var data=[[3.6048773584905667,
  2.0136288461538463,
  2.114296153846154,
  1.7979489795918366,
  1.1063961538461535,
  0.9232615384615386,
  1.122948,
  0.8215274509803923,
  0.7302372549019608,
  0.6130673076923077,
  0.4560735294117647],
 [0.6301075471698114,
  0.5358205882352942,
  0.5858673076923077,
  0.5225764705882355,
  0.5085192307692308,
  0.4949574257425743,
  0.4801069306930694,
  0.4656854166666667,
  0.4078451923076922,
  0.4430543689320387,
  0.3110867647058825],
 [0.3208365384615384,
  0.24393653846153845,
  0.2114428571428572,
  0.6287285714285714,
  0.4134588235294119,
  0.42436774193548404,
  0,
  0,
  0,
  0,
  0],
 [0.22254102564102565,
  0.1773435064935065,
  0.1954019607843137,
  0.1623045454545454,
  0.17759407894736845,
  0.16181133333333336,
  0.16181381578947365,
  0.22229597315436248,
  0.2039709677419356,
  0.1883660256410257,
  0.12378921568627453],
 [1.6817352380952382,
  1.314225,
  0.8747815533980586,
  1.007069387755102,
  0.7406153846153842,
  0.6658316831683166,
  0.7423865384615383,
  0.7018494949494953,
  0.554488349514563,
  0.5166201923076923,
  0.3608848484848485],
 [0.9585490196078428,
  0.8159106796116509,
  0.8600060301507535,
  0.6463534313725492,
  0.5725673267326732,
  0.6179465000000001,
  0.6127470588235295,
  0.6028135265700484,
  0.5569633663366335,
  0.6147584158415837,
  0.4725198473282442],
 [1.647719767441861,
  0.8520952941176476,
  0.9231152610441766,
  0.7385987447698746,
  0.4853352459016392,
  0.442916796875,
  0.458051171875,
  0.3849201612903224,
  0.36080625000000016,
  0.3260064000000001,
  0.2267668789808919],
 [3.2774415584415584,
  2.3405572368421046,
  2.440346794871795,
  2.124957792207792,
  1.7493941176470589,
  1.6346740506329112,
  1.6484454545454552,
  1.2891899999999996,
  0.9166718954248364,
  0.8468682432432431,
  0.6995478723404253],
 [3.565013513513514,
  2.707643421052631,
  2.7924274509803926,
  2.359813548387097,
  1.8107967320261449,
  1.6927503184713382,
  1.9121414473684213,
  1.4119095238095238,
  0.9393209150326796,
  0.8911153333333338,
  0.7573169999999998],
 [0.6575611650485437,
  0.5173548076923079,
  0.45439807692307704,
  0.43672105263157895,
  0.40396595744680863,
  0.3855215686274511,
  0.3846592233009709,
  0.3985126213592232,
  0.3833272727272728,
  0.3768126213592233,
  0.3222703125],
 [2.9735458745874594,
  2.1504670033670035,
  2.539564846416382,
  1.784862798634813,
  1.3488990228013018,
  1.23585544871795,
  1.3893737864077669,
  0.954430103806228,
  0.6836643790849674,
  0.6059400651465802,
  0.4586969072164946],
 [5.909471568627451,
  3.982988659793815,
  2.88418494623656,
  2.220013684210526,
  1.660884210526316,
  1.6118744444444448,
  1.8959616161616164,
  1.4697393939393948,
  1.029782291666667,
  0.9127968421052632,
  0.8144131147540985],
 [0.7278806896551722,
  0.5908914473684209,
  0.4716389261744965,
  0.5294519774011299,
  0.4467453125000001,
  0.5595181395348836,
  0.5921675257731959,
  0.6435596685082868,
  0.6180882051282048,
  0.7980642857142856,
  0.8562931297709925],
 [2.9042342465753417,
  1.961159712230216,
  1.7370141891891893,
  1.6464870129870135,
  1.433081410256411,
  1.3945134615384611,
  1.3283222222222215,
  1.198911920529801,
  0.8359165517241386,
  0.6760222972972973,
  0.6137777777777778],
 [1.4987309523809524,
  0.9315469387755098,
  1.2430192307692307,
  0.882856,
  0.810448076923077,
  0.7174547169811321,
  0.7947196078431372,
  0.7914882352941174,
  0.6534823529411764,
  0.5718176470588237,
  0.41555],
 [1.863820289855072,
  1.1571945273631845,
  1.301683414634146,
  0.8820401960784313,
  0.5979980952380953,
  0.553370038910506,
  0.5817466135458168,
  0.5129007812499999,
  0.4734567460317459,
  0.4528566265060243,
  0.3290370370370373],
 [1.7121534246575338,
  1.239466025641026,
  1.1897045454545454,
  0.9539516339869286,
  0.8064192546583847,
  0.7120041025641023,
  0.7101770408163266,
  0.6774178217821778,
  0.5694913461538464,
  0.5633103448275864,
  0.5436597014925374],
 [0.6139753246753249,
  0.5285506410256409,
  0.4972739726027399,
  0.4135355704697984,
  0.44349161290322586,
  0.4578412903225806,
  0.4948793548387093,
  0.5927000000000003,
  0.4599273972602741,
  0.4655751677852351,
  0.43997755102040825],
 [5.0138924528301905,
  3.51358431372549,
  2.8229019607843133,
  2.2433469387755105,
  1.385366,
  1.437709433962264,
  1.6883403846153848,
  1.2322403846153844,
  0.8663673076923075,
  0.7190403846153848,
  0.6239941176470589],
 [1.9912162561576356,
  1.3521965174129338,
  1.0501348039215683,
  1.0697390625000005,
  0.6878221153846152,
  0.6469240000000002,
  0.7074719471947193,
  0.6736417763157895,
  0.4562647887323942,
  0.3863163204747776,
  0.2964169642857141],
 [5.488574516129029,
  3.944791909385114,
  3.938187755102041,
  3.4550099206349234,
  2.4503996153846157,
  2.2438840466926067,
  2.050016501650164,
  1.2396712643678156,
  0.7924469387755092,
  0.6899896640826866,
  0.5620557195571956],
 [1.2785452830188675,
  1.048718367346939,
  1.2002529411764706,
  1.13005,
  1.0517200000000002,
  0.8777173076923077,
  0.8082903846153846,
  0.6931173076923075,
  0.7165173076923076,
  0.7108076923076923,
  0.476335294117647],
 [2.404667924528302,
  1.5319999999999996,
  1.1993612244897958,
  1.4309235294117646,
  1.2729058823529418,
  1.1236346153846153,
  1.1773384615384612,
  1.3267596153846155,
  1.0770000000000002,
  0.7623078431372547,
  0.6592454545454546],
 [6.512727090301003,
  3.959734313725489,
  3.3142660066006613,
  2.569197350993377,
  1.7891943573667717,
  1.784130120481927,
  1.9456335384615369,
  1.4946297297297295,
  0.9280724431818184,
  0.7971206060606054,
  0.6297416289592758],
 [1.9752929936305736,
  1.1812565789473686,
  1.3169032258064512,
  0.9810629870129866,
  0.6928490066225165,
  0.6559050847457629,
  0.6683389743589746,
  0.5473605128205129,
  0.4889985148514852,
  0.4569647368421049,
  0.3320774193548388],
 [1.2715563106796115,
  1.049476923076923,
  1.1579000000000002,
  0.9954879518072286,
  0.8536999999999998,
  0.8864427184466025,
  0.7756795918367348,
  0.8106622448979592,
  0.7386142857142854,
  0.7348339999999998,
  0.6456462686567164],
 [2.549934928229664,
  1.7791985436893205,
  2.060408542713568,
  1.6165868686868683,
  1.3476926829268294,
  1.241539805825243,
  1.3506019900497512,
  0.9533991111111114,
  0.8141877828054297,
  0.6172734597156401,
  0.34650606060606065],[0.6189,0.5250434782608695,0.6005234042553189,0.5991115384615384,0.3926446808510637,
  0.3547414634146342,
  0.3127519999999999,
  0,
  0,
  0,
  0],
 [1.288690566037736,
  0.9503470588235292,
  0.8353903846153845,
  0.7451577777777776,
  0.5675108108108109,
  0.6424528301886794,
  0.5727294117647058,
  0.5713307692307692,
  0.4577749999999997,
  0.4711403846153847,
  0.3779264705882352],
 [3.621703883495144,
  2.619971000000001,
  2.73509504950495,
  1.745815151515151,
  1.067021212121212,
  1.1243605769230771,
  1.384122115384615,
  1.0033079999999996,
  0.6438069306930689,
  0.6202316831683169,
  0.4576779411764706],
 [0.2632989898989899,
  0.21729100000000007,
  0.22363823529411772,
  0.1845602040816325,
  0.19407415730337074,
  0.1883330097087379,
  0.1873126213592233,
  0.255825,
  0.23577010309278346,
  0.2164959999999999,
  0.14735454545454552]]

//d3.text("D3.csv", function(text) {
//var d=(d3.csvParseRows(text));
//for(var i=1;i<d.length;i++){data.push(d[i])}
//});

	//data=[[9,1,9,1,9,1,1],[5,6,2,4,9,4,2],[9,1,2,9,9,1,1],[1,6,7,3,9,1,1],[8,9,2,1,9,1,1]]
  STATE=['AL', 'AR', 'CA', 'CO', 'CT', 'FL', 'GA', 'IL', 'IN', 'KS', 'KY',
       'MD', 'ME', 'MI', 'MS', 'NC', 'NE', 'NH', 'NJ', 'NY', 'OH', 'OK',
       'ON', 'PA', 'TN', 'TX', 'VA', 'VT', 'WI', 'WV', 'WY']

	Month=[2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018]
// initialzation
 var color = ["#6b486b", "yellow", "red", "green","blue","darkgreen","pink","gray","purple","yellow","#6b486b", "yellow", "red", "green","blue","gold","pink","gray","purple","yellow","#6b486b", "yellow",
 "red", "green","blue","orange","pink","gray","purple","yellow"]

 var xScale = d3.scaleLinear()
 	      .domain([0, 7])  // CHANGE
 	      .range([margin.left, innerWidth]);

 var yScale = d3.scaleBand()
 			      .domain(d3.range(STATE.length))
 			      .range([margin.top, innerHeight])
 			      .paddingInner(.3);




  var databind=[];
	var data_first=[];

  var data_first=data.map(d=>d[0]);
	//console.log(data_first);
	for (j=0;j<data_first.length;j++){databind.push({key:STATE[j],value:data_first[j]});}

	svg.append("g").selectAll("rect")
	       .data(databind)
				 .enter()
	       .append("rect").attr("y",function(d,i){return yScale(i);}).attr("x",margin.left).attr("width",function(d){return xScale(d.value)}).attr("fill",function(d,i){return color[i]}
).attr("height", yScale.bandwidth());

svg.select("g").selectAll("text")
       .data(databind)
       .enter()
       .append("text").attr("y",function(d,i){return yScale(i)+yScale.bandwidth()/2;}).attr("x",50).text(d=>d.key)


svg.append("g").attr("id","label").selectAll("text")
			        .data(databind)
			        .enter()
			        .append("text").attr("y",function(d,i){return yScale(i)+yScale.bandwidth()/2;}).attr("x",function(d){return xScale(d.value)+130}).text(d=>d.value)

svg.append("text").attr("id","Time").attr("y",200).attr("x",(innerWidth)).text(Month[0]);


	//var animation = svg.select("g").selectAll('rect')
	   // .transition()
	   // .duration(500); // wait 250+750ms before animation

	for (i=1;i<Month.length;i++){
		databind=[];
		data_now=data.map(d=>d[i]);
    // binding new data
		for (j=0;j<data_now.length;j++){
	  databind.push({key:STATE[j],value:data_now[j]});}
	svg.select("g").selectAll('rect').data(databind).sort(function(a, b) {return b.value - a.value;}).transition().delay(3000*i).duration(3000)
.attr("width",function(d){return xScale(d.value)}).attr("y",function(d,t){return yScale(t);})


svg.select("g").selectAll('text').data(databind).sort(function(a, b) {return b.value - a.value;}).transition().delay(3000*i).duration(3000)
.attr("y",function(d,t){return yScale(t)+yScale.bandwidth()/2;})


svg.select("g#label").selectAll('text').data(databind).sort(function(a, b) {return b.value - a.value;}).transition().delay(3000*i).duration(3000)
.attr("y",function(d,t){return yScale(t)+yScale.bandwidth()/2;}).attr("x",function(d){return xScale(d.value)+130}).text(d=>d.value)

svg.select("#Time").transition().delay(3000*i).duration(3000)
.text(Month[i])


    //svg.select("g").selectAll('rect').transition().delay(300*i).transition(2000).attr("y",function(d,i){return yScale(i);})
}
		</script><svg height="2000" width="1000"><rect fill="white" height="2000" width="1000"></rect><g><rect y="25" x="100" width="194.80388222464558" fill="green" height="43.89250814332247"></rect><rect y="87.70358306188928" x="100" width="190.16716627634662" fill="red" height="43.89250814332247"></rect><rect y="150.4071661237785" x="100" width="183.84581071428568" fill="darkgreen" height="43.89250814332247"></rect><rect y="213.11074918566777" x="100" width="177.4499430091185" fill="purple" height="43.89250814332247"></rect><rect y="275.8143322475571" x="100" width="172.98788961038963" fill="blue" height="43.89250814332247"></rect><rect y="338.5179153094464" x="100" width="171.48226545842215" fill="gray" height="43.89250814332247"></rect><rect y="401.22149837133566" x="100" width="169.72139463477697" fill="gray" height="43.89250814332247"></rect><rect y="463.9250814332247" x="100" width="169.0850630252101" fill="#6b486b" height="43.89250814332247"></rect><rect y="526.628664495114" x="100" width="167.95396825396824" fill="pink" height="43.89250814332247"></rect><rect y="589.3322475570033" x="100" width="162.22759752240378" fill="gold" height="43.89250814332247"></rect><rect y="652.0358306188925" x="100" width="160.19089552238808" fill="purple" height="43.89250814332247"></rect><rect y="714.7394136807818" x="100" width="152.7371218487395" fill="#6b486b" height="43.89250814332247"></rect><rect y="777.4429967426711" x="100" width="152.3146973827699" fill="green" height="43.89250814332247"></rect><rect y="840.1465798045604" x="100" width="150.7843004418262" fill="orange" height="43.89250814332247"></rect><rect y="902.8501628664495" x="100" width="150.6714863445378" fill="yellow" height="43.89250814332247"></rect><rect y="965.5537459283388" x="100" width="150.4938550420168" fill="blue" height="43.89250814332247"></rect><rect y="1028.257328990228" x="100" width="148.7118002915452" fill="red" height="43.89250814332247"></rect><rect y="1090.9609120521172" x="100" width="146.00732142857143" fill="blue" height="43.89250814332247"></rect><rect y="1153.6644951140065" x="100" width="141.84185924369746" fill="purple" height="43.89250814332247"></rect><rect y="1216.3680781758958" x="100" width="139.95510822510823" fill="yellow" height="43.89250814332247"></rect><rect y="1279.071661237785" x="100" width="138.363170995671" fill="pink" height="43.89250814332247"></rect><rect y="1341.7752442996743" x="100" width="136.7657142857143" fill="#6b486b" height="43.89250814332247"></rect><rect y="1404.4788273615636" x="100" width="136.42910052910057" fill="yellow" height="43.89250814332247"></rect><rect y="1467.182410423453" x="100" width="135.67992745535713" fill="yellow" height="43.89250814332247"></rect><rect y="1529.8859934853422" x="100" width="134.44174894957985" fill="gray" height="43.89250814332247"></rect><rect y="1592.5895765472314" x="100" width="132.81759247448977" fill="pink" height="43.89250814332247"></rect><rect y="1655.2931596091207" x="100" width="125.10633303002732" fill="green" height="43.89250814332247"></rect><rect y="1717.9967426710098" x="100" width="116.31425324675325" height="43.89250814332247"></rect><rect y="1780.700325732899" x="100" width="113.70523459383753" fill="yellow" height="43.89250814332247"></rect><rect y="1843.4039087947883" x="100" width="100" fill="yellow" height="43.89250814332247"></rect><rect y="1906.1074918566776" x="100" width="100" fill="red" height="43.89250814332247"></rect><text y="46.9462540716612" x="50">MI</text><text y="109.64983713355048" x="50">ON</text><text y="172.35342019543975" x="50">FL</text><text y="235.057003257329" x="50">WI</text><text y="297.7605863192182" x="50">TN</text><text y="360.46416938110747" x="50">NH</text><text y="423.16775244299674" x="50">IL</text><text y="485.871335504886" x="50">AL</text><text y="548.5749185667752" x="50">VA</text><text y="611.2785016286645" x="50">NC</text><text y="673.9820846905537" x="50">IN</text><text y="736.685667752443" x="50">KY</text><text y="799.3892508143323" x="50">CO</text><text y="862.0928338762216" x="50">TX</text><text y="924.7964169381107" x="50">NY</text><text y="987.5" x="50">CT</text><text y="1050.2035830618893" x="50">CA</text><text y="1112.9071661237786" x="50">MS</text><text y="1175.6107491856678" x="50">NJ</text><text y="1238.314332247557" x="50">MD</text><text y="1301.0179153094464" x="50">GA</text><text y="1363.7214983713357" x="50">OH</text><text y="1426.425081433225" x="50">WV</text><text y="1489.1286644951142" x="50">AR</text><text y="1551.8322475570035" x="50">VT</text><text y="1614.5358306188928" x="50">NE</text><text y="1677.239413680782" x="50">PA</text><text y="1739.942996742671" x="50">WY</text><text y="1802.6465798045606" x="50">OK</text><text y="1865.3501628664499" x="50">KS</text><text y="1928.053745928339" x="50">ME</text></g><g id="label"><text y="46.9462540716612" x="324.8038822246456">0.8562931297709925</text><text y="109.64983713355048" x="320.1671662763466">0.8144131147540985</text><text y="172.35342019543975" x="313.8458107142857">0.7573169999999998</text><text y="235.057003257329" x="307.4499430091185">0.6995478723404253</text><text y="297.7605863192182" x="302.98788961038963">0.6592454545454546</text><text y="360.46416938110747" x="301.48226545842215">0.6456462686567164</text><text y="423.16775244299674" x="299.72139463477697">0.6297416289592758</text><text y="485.871335504886" x="299.0850630252101">0.6239941176470589</text><text y="548.5749185667752" x="297.95396825396824">0.6137777777777778</text><text y="611.2785016286645" x="292.2275975224038">0.5620557195571956</text><text y="673.9820846905537" x="290.1908955223881">0.5436597014925374</text><text y="736.685667752443" x="282.7371218487395">0.476335294117647</text><text y="799.3892508143323" x="282.3146973827699">0.4725198473282442</text><text y="862.0928338762216" x="280.7843004418262">0.4586969072164946</text><text y="924.7964169381107" x="280.6714863445378">0.4576779411764706</text><text y="987.5" x="280.4938550420168">0.4560735294117647</text><text y="1050.2035830618893" x="278.71180029154516">0.43997755102040825</text><text y="1112.9071661237786" x="276.00732142857146">0.41555</text><text y="1175.6107491856678" x="271.84185924369746">0.3779264705882352</text><text y="1238.314332247557" x="269.95510822510823">0.3608848484848485</text><text y="1301.0179153094464" x="268.363170995671">0.34650606060606065</text><text y="1363.7214983713357" x="266.7657142857143">0.3320774193548388</text><text y="1426.425081433225" x="266.42910052910054">0.3290370370370373</text><text y="1489.1286644951142" x="265.67992745535713">0.3222703125</text><text y="1551.8322475570035" x="264.44174894957985">0.3110867647058825</text><text y="1614.5358306188928" x="262.81759247448974">0.2964169642857141</text><text y="1677.239413680782" x="255.10633303002732">0.2267668789808919</text><text y="1739.942996742671" x="246.31425324675325">0.14735454545454552</text><text y="1802.6465798045606" x="243.70523459383753">0.12378921568627453</text><text y="1865.3501628664499" x="230">0</text><text y="1928.053745928339" x="230">0</text></g><text id="Time" y="200" x="875">2018</text></svg>

	

</body></html>